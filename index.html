<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Drest Documentation</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <!--   <link rel="stylesheet" href="/css/main.css"> -->
        <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="/bootstrap/css/bootstrap-responsive.css">
        <link rel="stylesheet" href="/css/docs.css">
        
        <script type="text/javascript" src="/bootstrap/js/bootstrap.js"></script>
        
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css"></link>  
		<script src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>  
		<script>
		    function styleCode() {
		        if (typeof disableStyleCode != 'undefined') { return; }
		
		        var a = false;
		        jQuery('pre').each(function() {
		            if (!jQuery(this).hasClass('prettyprint')) {
		            	jQuery(this).addClass('prettyprint');
		                a = true;
		            }
		        });
		        if (a) { prettyPrint(); } 
		    }
		    jQuery(function() {styleCode();});
		</script>        

    </head>
    <body>

	    <div class="navbar navbar-fixed-top">
  <a href="https://github.com/leedavis81/drest"><img style="position: absolute; top: 0px; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav pull-left">
        <li><a href="/">Drest Documentation</a></li>
      </ul>
    </div>
  </div>
</div>
	    
	    <div class="container">
	      <div class="row">
	        <div class="span3">
	            <ul id="menu" class="nav nav-list" data-spy="affix">
  <li class="nav-header">INTRODUCTION</li>
  <li><a href="/docs/introduction/#what-it-does">What it does</a></li>
  <li><a href="/docs/introduction/#why-you-want-to-use-it">Why you want to use it</a></li>
  <li class="nav-header">INSTALLATION</li>
  <li><a href="/docs/installation/#composer">Composer</a></li>
  <li><a href="/docs/installation/#github">Github</a></li>
  <li><a href="/docs/installation/#dependencies">Dependencies</a></li>
  <li class="nav-header">GETTING STARTED</li>  
  <li><a href="/docs/getting-started/#setting-up-drest-manager">Setting up your drest manager</a></li>
  <li><a href="/docs/getting-started/#exposing-entities">Exposing entities</a></li>
</ul>        
	        </div>
	        <div class="span9">
	        
	            <div class="page-header">
  <h1>Dress up your doctrine entities</h1>
  <h3>And expose them as RESful resource endpoints</h3>  
</div>
<br>
<h4>* Quickly annotate existing Doctrine entities to become a fully functional REST resource.</h4>
<pre>@Drest\Resource(
    routes={
        @Drest\Route(
            name="get_user",
            route_pattern="/user/:id",
            verbs={"GET"},
            content="element"
)})</pre>
<br>
<h4>* Utilises the internal router for matching resource route patterns to client requests.</h4>
<pre>
[GET] http://myapplication.com/api/user/123
</pre>
<br>
<h4>* Specify what data you want to expose from your entities (including relations), or let the client choose!</h4>
<pre>
// Set exactly what fields you want to expose
@Drest\Route(
    expose={"username", "profile" : {"id", "lastname", "addresses" : {"address"}}, "phone_numbers"}
 )
 
 // or let the client choose
$config->setExposeRequestOption(Configuration::EXPOSE_REQUEST_PARAM_GET, 'expose');
[GET] http://myapplication.com/api/user/123?expose=username|profile[id, lastname]

// Also you can set a specific maximum depth you want to expose - (uses doctrines relations)
$config->setExposureDepth(3);</pre>
<br>
<h4>Comes with JSON and XML response writers with the ability easily create and use your own.</h4>
<pre>
// Set the default writers to be used
$config->setDefaultWriters(array('Json', 'Xml'));

// Or only allow certain writers per resource
 @Drest\Resource(
    writers={"Json"}
    .....
)</pre>
<br>
<h4>Allows media type detection from client request or header information, getting you one step close to RMM level 3.</h4>
<pre>
// Determine the requested media type by reading:
$drestConfig->setDetectContentOptions(array(
    Configuration::DETECT_CONTENT_HEADER => 'Accept',   // An HTTP Header called "Accept"  
    Configuration::DETECT_CONTENT_EXTENSION => true,    // A dot extension on the URL (eg .json)
    Configuration::DETECT_CONTENT_PARAM => 'format'     // A parameter parsed called "format" (eg format=xml)
));</pre>
<br>
<h4>Use it independently from your existing framework stack, or alongside it*.</h4>
<pre>
// Dispatch from an application endpoint (index.phtml)
echo $dm->dispatch();

// Or from within a controller in your framework
$updatedResponseObject =  $dm->dispatch($myZf2RequestObject, $mySym2ResponseObject);
</pre>
<p>* On the condition that both request / response adapters have been created for that particular framework </p>
<br>
<h4>Allows extension points so you can configure requests to your specific needs.</h4>        
<pre>
 @Drest\Resource(
    service_class="MyService",
    routes={
        @Drest\Route(
            name="get_user",
            route_pattern="/user/:id+",
            verbs={"GET"},
            content="element",
            call_method="myMethod"
 )})
 
class MyService extends Drest\Service\AbstractService
{
    /**
     * From here you'll have access to the following objects:
     * @var \Doctrine\ORM\EntityManager     $em         - Doctrine Entity Manager
     * @var \Drest\Manager                  $dm         - Drest Manager
     * @var \Drest\Request                  $request    - Drest Request Object
     * @var \Drest\Response                 $response   - Drest Response Object
     * @var \Drest\Mapping\RouteMetaData    $route      - The mathced route
     * @var \Drest\Writer\AbstractWriter    $writer     - The pre-determined media writer
     */
    public function myMethod()
    {
        // You can do what you like here
        $query = $this->em->createQuery(...
        $results = $this->createResultSet($query->execute..)..
        $this->renderDeterminedWriter($results); // or not
    }
}
</pre>        
		
	        </div>
	      </div>
	    </div>    
    
    </body>
</html>
